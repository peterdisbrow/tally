# Tally Encoder — Configuration
# Copy this file to /etc/tally-encoder/config.env and edit it.

# ── Relay Server ─────────────────────────────────────────────
# The RTMP ingest URL of your Tally relay server (no trailing slash)
RELAY_URL=rtmp://your-relay.railway.app/live

# Your church's unique token (from the relay server registration)
CHURCH_TOKEN=YOUR_TOKEN_HERE

# ── Encoding ─────────────────────────────────────────────────
# Target video bitrate for the monitoring stream
# 3000k = 3 Mbps (recommended for 1080p monitoring)
# 1500k = 1.5 Mbps (use for slower upload connections)
BITRATE=3000k

# ── Capture Device ───────────────────────────────────────────
# INPUT_TYPE: v4l2    = Elgato Cam Link 4K or any USB HDMI capture (Raspberry Pi)
#             decklink = Blackmagic UltraStudio Recorder 3G (Intel NUC / Thunderbolt)
INPUT_TYPE=v4l2

# For v4l2: path to the V4L2 video device (usually /dev/video0)
# For decklink: device name as reported by ffmpeg, e.g. "UltraStudio Recorder 3G"
INPUT_DEVICE=/dev/video0

# ALSA audio device for v4l2 capture (not used for decklink — audio is embedded)
# Find yours with: arecord -l
AUDIO_DEVICE=hw:0,0

# ── API Server ────────────────────────────────────────────────
# Port for the local management API (used by Tally relay for remote config)
TALLY_API_PORT=7070

# Bearer token for authenticating API requests (set a strong random secret)
TALLY_API_TOKEN=change-me-to-a-random-secret
